{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ahj-list_editor/webpack/bootstrap","webpack://ahj-list_editor/webpack/runtime/publicPath","webpack://ahj-list_editor/./src/img/update.png","webpack://ahj-list_editor/./src/js/tooltip.js","webpack://ahj-list_editor/./src/js/Popup.js","webpack://ahj-list_editor/./src/img/cell.jpg","webpack://ahj-list_editor/./src/js/app.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.p = \"\";","export default __webpack_public_path__ + \"assets/0423e9054bbc9277b0347f38f82b6921.png\";","export default class Tooltip {\n  constructor() {\n    this._tooltips = [];\n  }\n\n  showTooltip(message, element) {\n    const tooltipElement = document.createElement('DIV');\n\n    tooltipElement.classList.add('form-error');\n    tooltipElement.textContent = message;\n\n    const id = performance.now();\n\n    this._tooltips.push({\n      id,\n      element: tooltipElement,\n    });\n\n    document.body.appendChild(tooltipElement);\n\n    const { right, top } = element.getBoundingClientRect();\n\n    tooltipElement.style.left = `${right + 5}px`;\n    tooltipElement.style.top = `${top + element.offsetHeight / 2 - tooltipElement.offsetHeight / 2}px`;\n    return id;\n  }\n\n  removeTooltip(id) {\n    const tooltip = this._tooltips.find((t) => t.id === id);\n\n    if (tooltip) {\n      tooltip.element.remove();\n    }\n\n    this._tooltips = this._tooltips.filter((t) => t.id !== id);\n  }\n}\n","import edit from '../img/update.png';\nimport Tooltip from './tooltip';\n\nexport default class Popup {\n  constructor() {\n    this.container = null;\n    this.update = false;\n    this.activEvent = null;\n  }\n\n  openPopup(container) {\n    if (!(container instanceof HTMLElement)) {\n      throw new Error('container is not HTMLElement');\n    }\n\n    this.container = container;\n    if (!document.querySelector('.popup_container')) {\n      const containerPopup = document.createElement('DIV');\n      const formPopup = document.createElement('FORM');\n      const popupControlName = document.createElement('DIV');\n      const paragraphName = document.createElement('P');\n      const inputName = document.createElement('INPUT');\n      const popupControlCost = document.createElement('DIV');\n      const paragraphCost = document.createElement('P');\n      const inputCost = document.createElement('INPUT');\n      const containerBtn = document.createElement('DIV');\n      const btnCancel = document.createElement('BUTTON');\n      const btnSave = document.createElement('BUTTON');\n\n      formPopup.setAttribute('novalidate', true);\n      containerPopup.classList.add('popup_container');\n      popupControlName.classList.add('popup-control');\n      popupControlCost.classList.add('popup-control');\n      paragraphName.classList.add('Input_text');\n      paragraphName.textContent = 'Название';\n      paragraphCost.classList.add('Input_text');\n      paragraphCost.textContent = 'Стоимость';\n      inputName.classList.add('input_name');\n      inputName.setAttribute('required', true);\n      inputName.name = 'name';\n      inputCost.classList.add('input_cost');\n      inputCost.setAttribute('required', true);\n      inputCost.name = 'cost';\n      inputCost.pattern = '^([0-9]*$)';\n\n      containerBtn.classList.add('popup-btn');\n      btnCancel.classList.add('btn');\n      btnCancel.classList.add('btn_cancel');\n      btnCancel.textContent = 'Отмена';\n\n      btnSave.classList.add('btn');\n      btnSave.classList.add('btn_save');\n      btnSave.textContent = 'Сохранить';\n\n      document.body.appendChild(containerPopup);\n      containerPopup.prepend(formPopup);\n\n      containerBtn.prepend(btnCancel);\n      containerBtn.prepend(btnSave);\n      formPopup.prepend(containerBtn);\n\n      popupControlCost.prepend(inputCost);\n      popupControlCost.prepend(paragraphCost);\n      formPopup.prepend(popupControlCost);\n\n      popupControlName.prepend(inputName);\n      popupControlName.prepend(paragraphName);\n      formPopup.prepend(popupControlName);\n\n      btnCancel.addEventListener('click', (e) => {\n        e.preventDefault();\n\n        Popup.closePopup();\n      });\n\n      const tooltipFactory = new Tooltip();\n\n      let actualMessages = [];\n\n      const showTooltip = (message, el) => {\n        actualMessages.push({\n          name: el.name,\n          id: tooltipFactory.showTooltip(message, el),\n        });\n      };\n\n      formPopup.addEventListener('submit', (e) => {\n        e.preventDefault();\n\n        actualMessages.forEach((message) => tooltipFactory.removeTooltip(message.id));\n        actualMessages = [];\n\n        if (formPopup.checkValidity()) {\n          if (!this.update) {\n            this.saveInputNote();\n            Popup.closePopup();\n          }\n          if (this.update) {\n            const Name = this.activEvent.closest('.list_editor').querySelector('.name_title');\n            const Cost = this.activEvent.closest('.list_editor').querySelector('.cost_title');\n\n            Name.textContent = inputName.value;\n            Cost.textContent = inputCost.value;\n\n            this.update = false;\n            Popup.closePopup();\n          }\n        } else {\n          const { elements } = formPopup;\n\n          [...elements].forEach((elem) => {\n            const error = Popup.getError(elem);\n\n            if (error) {\n              showTooltip(error, elem);\n            }\n          });\n        }\n      });\n\n      const elementOnBlur = (e) => {\n        const el = e.target;\n\n        const error = Popup.getError(el);\n        if (error) {\n          showTooltip(error, el);\n        } else {\n          const currentErrorMessage = actualMessages.find((item) => item.name === el.name);\n\n          if (currentErrorMessage) {\n            tooltipFactory.removeTooltip(currentErrorMessage.id);\n          }\n        }\n\n        el.removeEventListener('blur', elementOnBlur);\n      };\n\n      Array.from(formPopup.elements).forEach((el) => el.addEventListener('focus', () => {\n        el.addEventListener('blur', elementOnBlur);\n      }));\n    }\n  }\n\n  static getError(el) {\n    const errors = {\n      name: {\n        valueMissing: 'Представьтесь, пожалуйста!',\n      },\n      cost: {\n        valueMissing: 'Заполните, пожалуйста, поле \"Стоимость\"',\n        patternMismatch: 'Стоимость вы можете указать только цифрами',\n      },\n    };\n\n    const errorKey = Object.keys(ValidityState.prototype).find((key) => {\n      if (!el.name) return null;\n      if (key === 'valid') return null;\n\n      return el.validity[key];\n    });\n\n    if (!errorKey) return null;\n\n    return errors[el.name][errorKey];\n  }\n\n  static closePopup() {\n    document.querySelector('.popup_container').remove();\n  }\n\n  saveInputNote() {\n    const inputName = document.querySelector('.input_name');\n    const inputCost = document.querySelector('.input_cost');\n\n    const editor = document.querySelector('.list_editor_container');\n    const listEditor = document.createElement('UL');\n    const liName = document.createElement('LI');\n    const paragraphName = document.createElement('P');\n    const liCost = document.createElement('LI');\n    const paragraphCost = document.createElement('P');\n    const liActionEdit = document.createElement('LI');\n    const btnUpdate = document.createElement('IMG');\n    const btnDelete = document.createElement('DIV');\n\n    listEditor.classList.add('list_editor');\n    liName.classList.add('name');\n    paragraphName.classList.add('name_title');\n    liCost.classList.add('cost');\n    paragraphCost.classList.add('cost_title');\n    liActionEdit.classList.add('action_edit');\n    btnUpdate.classList.add('btn_update_img');\n    btnDelete.classList.add('btn_delete');\n\n    paragraphName.textContent = inputName.value;\n    paragraphCost.textContent = inputCost.value;\n    btnUpdate.src = edit;\n    btnDelete.textContent = 'x';\n\n    editor.appendChild(listEditor);\n    liActionEdit.prepend(btnDelete);\n    liActionEdit.prepend(btnUpdate);\n    listEditor.prepend(liActionEdit);\n    liCost.prepend(paragraphCost);\n    listEditor.prepend(liCost);\n    liName.prepend(paragraphName);\n    listEditor.prepend(liName);\n\n    btnUpdate.addEventListener('click', (e) => {\n      this.updateNote(btnUpdate.closest('.list_editor'));\n      this.activEvent = e.target;\n    });\n    btnDelete.addEventListener('click', () => btnDelete.closest('.list_editor').remove());\n  }\n\n  updateNote(listEditor) {\n    if (this.container) {\n      this.openPopup(this.container);\n    } else {\n      this.openPopup(document.querySelector('.app_container'));\n      this.activEvent = document.querySelector('.btn_update_img');\n    }\n    const inputName = document.querySelector('.input_name');\n    const inputCost = document.querySelector('.input_cost');\n\n    inputName.value = listEditor.querySelector('.name_title').textContent;\n    inputCost.value = listEditor.querySelector('.cost_title').textContent;\n\n    this.update = true;\n  }\n}\n","export default __webpack_public_path__ + \"assets/5aa6b32fc514efe1581dee5b8561fec9.jpg\";","import Popup from './Popup';\nimport edit from '../img/update.png';\nimport background from '../img/cell.jpg';\n\nconsole.log('app.js is bunled');\n\ndocument.querySelector('.btn_update_img').src = edit;\ndocument.querySelector('.container').style.backgroundImage = `url(${background})`;\n\nconst btnAdd = document.querySelector('.btn_add');\nconst btnUpdate = document.querySelector('.btn_update_img');\nconst btnDelete = document.querySelector('.btn_delete');\n\nconst popup = new Popup();\nconst containerPopup = document.querySelector('.app_container');\n\nbtnAdd.addEventListener('click', (e) => {\n  e.preventDefault();\n\n  popup.openPopup(containerPopup);\n});\n\nbtnUpdate.addEventListener('click', () => {\n  popup.updateNote(btnUpdate.closest('.list_editor'));\n});\n\nbtnDelete.addEventListener('click', () => btnDelete.closest('.list_editor').remove());\n"],"names":["__webpack_require__","Tooltip","constructor","this","_tooltips","showTooltip","message","element","tooltipElement","document","createElement","classList","add","textContent","id","performance","now","push","body","appendChild","right","top","getBoundingClientRect","style","left","offsetHeight","removeTooltip","tooltip","find","t","remove","filter","Popup","container","update","activEvent","openPopup","HTMLElement","Error","querySelector","containerPopup","formPopup","popupControlName","paragraphName","inputName","popupControlCost","paragraphCost","inputCost","containerBtn","btnCancel","btnSave","setAttribute","name","pattern","prepend","addEventListener","e","preventDefault","closePopup","tooltipFactory","actualMessages","el","forEach","checkValidity","saveInputNote","Name","closest","Cost","value","elements","elem","error","getError","elementOnBlur","target","currentErrorMessage","item","removeEventListener","Array","from","errorKey","Object","keys","ValidityState","prototype","key","validity","valueMissing","cost","patternMismatch","editor","listEditor","liName","liCost","liActionEdit","btnUpdate","btnDelete","src","edit","updateNote","console","log","backgroundImage","background","btnAdd","popup"],"sourceRoot":""}